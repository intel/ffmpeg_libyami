FATE_LIBYAMI_H264 = aud_mw_e                                                    \
            ba1_ft_c                                                    \
            ba1_sony_d                                                  \
            ba2_sony_f                                                  \
            ba_mw_d                                                     \
            bamq1_jvc_c                                                 \
            bamq2_jvc_c                                                 \
            banm_mw_d                                                   \
            basqp1_sony_c                                               \
            caba1_sony_d                                                \
            caba1_sva_b                                                 \
            caba2_sony_e                                                \
            caba2_sva_b                                                 \
            caba3_sony_c                                                \
            caba3_sva_b                                                 \
            caba3_toshiba_e                                             \
            cabac_mot_fld0_full                                         \
            cabac_mot_frm0_full                                         \
            cabac_mot_mbaff0_full                                       \
            cabac_mot_picaff0_full                                      \
            cabaci3_sony_b                                              \
            cabast3_sony_e                                              \
            cabastbr3_sony_b                                            \
            cabref3_sand_d                                              \
            cacqp3_sony_d                                               \
            cafi1_sva_c                                                 \
            cama1_sony_c                                                \
            cama1_toshiba_b                                             \
            cama1_vtc_c                                                 \
            cama2_vtc_b                                                 \
            cama3_sand_e                                                \
            cama3_vtc_b                                                 \
            camaci3_sony_c                                              \
            camanl1_toshiba_b                                           \
            camanl2_toshiba_b                                           \
            camanl3_sand_e                                              \
            camasl3_sony_b                                              \
            camp_mot_mbaff_l30                                          \
            camp_mot_mbaff_l31                                          \
            canl1_sony_e                                                \
            canl1_sva_b                                                 \
            canl1_toshiba_g                                             \
            canl2_sony_e                                                \
            canl2_sva_b                                                 \
            canl3_sony_c                                                \
            canl3_sva_b                                                 \
            canl4_sva_b                                                 \
            canlma2_sony_c                                              \
            canlma3_sony_c                                              \
            capa1_toshiba_b                                             \
            capama3_sand_f                                              \
            capcm1_sand_e                                               \
            capcmnl1_sand_e                                             \
            capm3_sony_d                                                \
            caqp1_sony_b                                                \
            cavlc_mot_fld0_full_b                                       \
            cavlc_mot_frm0_full_b                                       \
            cavlc_mot_mbaff0_full_b                                     \
            cavlc_mot_picaff0_full_b                                    \
            cawp1_toshiba_e                                             \
            cawp5_toshiba_e                                             \
            ci1_ft_b                                                    \
            ci_mw_d                                                     \
            cvbs3_sony_c                                                \
            cvcanlma2_sony_c                                            \
            cvfi1_sony_d                                                \
            cvfi1_sva_c                                                 \
            cvfi2_sony_h                                                \
            cvfi2_sva_c                                                 \
            cvma1_sony_d                                                \
            cvma1_toshiba_b                                             \
            cvmanl1_toshiba_b                                           \
            cvmanl2_toshiba_b                                           \
            cvmapaqp3_sony_e                                            \
            cvmaqp2_sony_g                                              \
            cvmaqp3_sony_d                                              \
            cvmp_mot_fld_l30_b                                          \
            cvmp_mot_frm_l31_b                                          \
            cvnlfi1_sony_c                                              \
            cvnlfi2_sony_h                                              \
            cvpa1_toshiba_b                                             \
            cvpcmnl1_sva_c                                              \
            cvpcmnl2_sva_c                                              \
            cvwp1_toshiba_e                                             \
            cvwp2_toshiba_e                                             \
            cvwp3_toshiba_e                                             \
            cvwp5_toshiba_e                                             \
            fi1_sony_e                                                  \
            frext-alphaconformanceg                                     \
            frext-bcrm_freh10                                           \
            frext-brcm_freh11                                           \
            frext-brcm_freh3                                            \
            frext-brcm_freh4                                            \
            frext-brcm_freh5                                            \
            frext-brcm_freh8                                            \
            frext-brcm_freh9                                            \
            frext-freh12_b                                              \
            frext-freh1_b                                               \
            frext-freh2_b                                               \
            frext-freh6                                                 \
            frext-freh7_b                                               \
            frext-frext01_jvc_d                                         \
            frext-frext02_jvc_c                                         \
            frext-frext1_panasonic_c                                    \
            frext-frext2_panasonic_b                                    \
            frext-frext3_panasonic_d                                    \
            frext-frext4_panasonic_a                                    \
            frext-frext_mmco4_sony_b                                    \
            frext-hcaff1_hhi_b                                          \
            frext-hcafr1_hhi_c                                          \
            frext-hcafr2_hhi_a                                          \
            frext-hcafr3_hhi_a                                          \
            frext-hcafr4_hhi_a                                          \
            frext-hcamff1_hhi_b                                         \
            frext-hpca_brcm_c                                           \
            frext-hpcadq_brcm_b                                         \
            frext-hpcafl_bcrm_c                                         \
            frext-hpcaflnl_bcrm_c                                       \
            frext-hpcalq_brcm_b                                         \
            frext-hpcamapalq_bcrm_b                                     \
            frext-hpcamolq_brcm_b                                       \
            frext-hpcanl_brcm_c                                         \
            frext-hpcaq2lq_brcm_b                                       \
            frext-hpcv_brcm_a                                           \
            frext-hpcvfl_bcrm_a                                         \
            frext-hpcvflnl_bcrm_a                                       \
            frext-hpcvmolq_brcm_b                                       \
            frext-hpcvnl_brcm_a                                         \
            hcbp2_hhi_a                                                 \
            hcmp1_hhi_a                                                 \
            ls_sva_d                                                    \
            midr_mw_d                                                   \
            mps_mw_a                                                    \
            mr1_bt_a                                                    \
            mr1_mw_a                                                    \
            mr2_mw_a                                                    \
            mr2_tandberg_e                                              \
            mr3_tandberg_b                                              \
            mr4_tandberg_c                                              \
            mr5_tandberg_c                                              \
            mr9_bt_b                                                    \
            mv1_brcm_d                                                  \
            nl1_sony_d                                                  \
            nl2_sony_h                                                  \
            nl3_sva_e                                                   \
            nlmq1_jvc_c                                                 \
            nlmq2_jvc_c                                                 \
            nrf_mw_e                                                    \
            sharp_mp_field_1_b                                          \
            sharp_mp_field_2_b                                          \
            sharp_mp_field_3_b                                          \
            sharp_mp_paff_1r2                                           \
            sharp_mp_paff_2r                                            \
            sl1_sva_b                                                   \
            sva_ba1_b                                                   \
            sva_ba2_d                                                   \
            sva_base_b                                                  \
            sva_cl1_e                                                   \
            sva_fm1_e                                                   \
            sva_nl1_b                                                   \
            sva_nl2_e                                                   \

FATE_LIBYAMI_H264_REINIT_TESTS := large_420_8-to-small_420_8                    \


FATE_LIBYAMI_H264_REF  := $(FATE_LIBYAMI_H264:%=h264-conformance-%) 

FATE_LIBYAMI_H264_REINIT_REF  := $(FATE_LIBYAMI_H264_REINIT_TESTS:%=h264-reinit-%) 

FATE_LIBYAMI_H264  := $(FATE_LIBYAMI_H264:%=fate-libyami-h264-conformance-%)                    \
              $(FATE_LIBYAMI_H264_REINIT_TESTS:%=fate-libyami-h264-reinit-%)            \
              fate-libyami-h264-extreme-plane-pred                              \

FATE_LIBYAMI_H264-$(call DEMDEC, H264, LIBYAMI_H264) += $(FATE_LIBYAMI_H264)
FATE_LIBYAMI_H264-$(call ALLYES, MOV_DEMUXER H264_MP4TOANNEXB_BSF) += fate-libyami-h264-bsf-mp4toannexb
FATE_LIBYAMI_H264-$(call DEMDEC, MATROSKA, LIBYAMI_H264) += fate-libyami-h264-direct-bff

FATE_SAMPLES_AVCONV += $(FATE_LIBYAMI_H264-yes)
fate-libyami-h264: $(FATE_LIBYAMI_H264-yes)

fate-libyami-h264-conformance-aud_mw_e:                   CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/AUD_MW_E.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-ba1_ft_c:                   CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/BA1_FT_C.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-ba1_sony_d:                 CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/BA1_Sony_D.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-ba2_sony_f:                 CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/BA2_Sony_F.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-ba3_sva_c:                  CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/BA3_SVA_C.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-ba_mw_d:                    CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/BA_MW_D.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-bamq1_jvc_c:                CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/BAMQ1_JVC_C.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-bamq2_jvc_c:                CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/BAMQ2_JVC_C.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-banm_mw_d:                  CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/BANM_MW_D.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-basqp1_sony_c:              CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/BASQP1_Sony_C.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-caba1_sony_d:               CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CABA1_Sony_D.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-caba1_sva_b:                CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CABA1_SVA_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-caba2_sony_e:               CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CABA2_Sony_E.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-caba2_sva_b:                CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CABA2_SVA_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-caba3_sony_c:               CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CABA3_Sony_C.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-caba3_sva_b:                CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CABA3_SVA_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-caba3_toshiba_e:            CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CABA3_TOSHIBA_E.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-cabac_mot_fld0_full:        CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/camp_mot_fld0_full.26l -pix_fmt yuv420p
fate-libyami-h264-conformance-cabac_mot_frm0_full:        CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/camp_mot_frm0_full.26l -pix_fmt yuv420p
fate-libyami-h264-conformance-cabac_mot_mbaff0_full:      CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/camp_mot_mbaff0_full.26l -pix_fmt yuv420p
fate-libyami-h264-conformance-cabac_mot_picaff0_full:     CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/camp_mot_picaff0_full.26l -pix_fmt yuv420p
fate-libyami-h264-conformance-cabaci3_sony_b:             CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CABACI3_Sony_B.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-cabast3_sony_e:             CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CABAST3_Sony_E.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-cabastbr3_sony_b:           CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CABASTBR3_Sony_B.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-cabref3_sand_d:             CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CABREF3_Sand_D.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-cacqp3_sony_d:              CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CACQP3_Sony_D.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-cafi1_sva_c:                CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CAFI1_SVA_C.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-cama1_sony_c:               CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CAMA1_Sony_C.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-cama1_toshiba_b:            CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CAMA1_TOSHIBA_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-cama1_vtc_c:                CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/cama1_vtc_c.avc -pix_fmt yuv420p
fate-libyami-h264-conformance-cama2_vtc_b:                CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/cama2_vtc_b.avc -pix_fmt yuv420p
fate-libyami-h264-conformance-cama3_sand_e:               CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CAMA3_Sand_E.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-cama3_vtc_b:                CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/cama3_vtc_b.avc -pix_fmt yuv420p
fate-libyami-h264-conformance-camaci3_sony_c:             CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CAMACI3_Sony_C.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-camanl1_toshiba_b:          CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CAMANL1_TOSHIBA_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-camanl2_toshiba_b:          CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CAMANL2_TOSHIBA_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-camanl3_sand_e:             CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CAMANL3_Sand_E.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-camasl3_sony_b:             CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CAMASL3_Sony_B.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-camp_mot_mbaff_l30:         CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CAMP_MOT_MBAFF_L30.26l -pix_fmt yuv420p
fate-libyami-h264-conformance-camp_mot_mbaff_l31:         CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CAMP_MOT_MBAFF_L31.26l -pix_fmt yuv420p
fate-libyami-h264-conformance-canl1_sony_e:               CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CANL1_Sony_E.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-canl1_sva_b:                CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CANL1_SVA_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-canl1_toshiba_g:            CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CANL1_TOSHIBA_G.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-canl2_sony_e:               CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CANL2_Sony_E.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-canl2_sva_b:                CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CANL2_SVA_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-canl3_sony_c:               CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CANL3_Sony_C.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-canl3_sva_b:                CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CANL3_SVA_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-canl4_sva_b:                CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CANL4_SVA_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-canlma2_sony_c:             CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CANLMA2_Sony_C.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-canlma3_sony_c:             CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CANLMA3_Sony_C.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-capa1_toshiba_b:            CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CAPA1_TOSHIBA_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-capama3_sand_f:             CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CAPAMA3_Sand_F.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-capcm1_sand_e:              CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CAPCM1_Sand_E.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-capcmnl1_sand_e:            CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CAPCMNL1_Sand_E.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-capm3_sony_d:               CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CAPM3_Sony_D.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-caqp1_sony_b:               CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CAQP1_Sony_B.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-cavlc_mot_fld0_full_b:      CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/cvmp_mot_fld0_full_B.26l -pix_fmt yuv420p
fate-libyami-h264-conformance-cavlc_mot_frm0_full_b:      CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/cvmp_mot_frm0_full_B.26l -pix_fmt yuv420p
fate-libyami-h264-conformance-cavlc_mot_mbaff0_full_b:    CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/cvmp_mot_mbaff0_full_B.26l -pix_fmt yuv420p
fate-libyami-h264-conformance-cavlc_mot_picaff0_full_b:   CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/cvmp_mot_picaff0_full_B.26l -pix_fmt yuv420p
fate-libyami-h264-conformance-cawp1_toshiba_e:            CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CAWP1_TOSHIBA_E.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-cawp5_toshiba_e:            CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CAWP5_TOSHIBA_E.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-ci1_ft_b:                   CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CI1_FT_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-ci_mw_d:                    CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CI_MW_D.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-cvbs3_sony_c:               CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVBS3_Sony_C.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-cvcanlma2_sony_c:           CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVCANLMA2_Sony_C.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-cvfi1_sony_d:               CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVFI1_Sony_D.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-cvfi1_sva_c:                CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVFI1_SVA_C.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-cvfi2_sony_h:               CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVFI2_Sony_H.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-cvfi2_sva_c:                CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVFI2_SVA_C.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-cvma1_sony_d:               CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVMA1_Sony_D.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-cvma1_toshiba_b:            CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVMA1_TOSHIBA_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-cvmanl1_toshiba_b:          CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVMANL1_TOSHIBA_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-cvmanl2_toshiba_b:          CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVMANL2_TOSHIBA_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-cvmapaqp3_sony_e:           CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVMAPAQP3_Sony_E.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-cvmaqp2_sony_g:             CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVMAQP2_Sony_G.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-cvmaqp3_sony_d:             CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVMAQP3_Sony_D.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-cvmp_mot_fld_l30_b:         CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVMP_MOT_FLD_L30_B.26l -pix_fmt yuv420p
fate-libyami-h264-conformance-cvmp_mot_frm_l31_b:         CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVMP_MOT_FRM_L31_B.26l -pix_fmt yuv420p
fate-libyami-h264-conformance-cvnlfi1_sony_c:             CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVNLFI1_Sony_C.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-cvnlfi2_sony_h:             CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVNLFI2_Sony_H.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-cvpa1_toshiba_b:            CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVPA1_TOSHIBA_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-cvpcmnl1_sva_c:             CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVPCMNL1_SVA_C.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-cvpcmnl2_sva_c:             CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVPCMNL2_SVA_C.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-cvwp1_toshiba_e:            CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVWP1_TOSHIBA_E.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-cvwp2_toshiba_e:            CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVWP2_TOSHIBA_E.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-cvwp3_toshiba_e:            CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVWP3_TOSHIBA_E.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-cvwp5_toshiba_e:            CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/CVWP5_TOSHIBA_E.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-fi1_sony_e:                 CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FI1_Sony_E.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-alphaconformanceg:    CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/test8b43.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-bcrm_freh10:          CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/freh10.264 -vsync drop -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-brcm_freh11:          CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/freh11.264 -vsync drop -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-brcm_freh3:           CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/freh3.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-brcm_freh4:           CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/freh4.264 -vsync drop -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-brcm_freh5:           CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/freh5.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-brcm_freh8:           CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/freh8.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-brcm_freh9:           CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/freh9.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-freh12_b:             CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/Freh12_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-freh1_b:              CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/Freh1_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-freh2_b:              CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/Freh2_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-freh6:                CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/freh6.264 -vsync drop -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-freh7_b:              CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/Freh7_B.264 -vsync drop -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-frext01_jvc_d:        CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/FREXT01_JVC_D.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-frext02_jvc_c:        CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/FREXT02_JVC_C.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-frext1_panasonic_c:   CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/FRExt1_Panasonic.avc -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-frext2_panasonic_b:   CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/FRExt2_Panasonic.avc -vsync 0 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-frext3_panasonic_d:   CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/FRExt3_Panasonic.avc -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-frext4_panasonic_a:   CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/FRExt4_Panasonic.avc -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-frext_mmco4_sony_b:   CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/FRExt_MMCO4_Sony_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-hcaff1_hhi_b:         CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/HCAFF1_HHI.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-hcafr1_hhi_c:         CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/HCAFR1_HHI.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-hcafr2_hhi_a:         CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/HCAFR2_HHI.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-hcafr3_hhi_a:         CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/HCAFR3_HHI.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-hcafr4_hhi_a:         CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/HCAFR4_HHI.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-hcamff1_hhi_b:        CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/HCAMFF1_HHI.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-hpca_brcm_c:          CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/HPCA_BRCM_C.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-hpcadq_brcm_b:        CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/HPCADQ_BRCM_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-hpcafl_bcrm_c:        CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/HPCAFL_BRCM_C.264 -vsync drop -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-hpcaflnl_bcrm_c:      CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/HPCAFLNL_BRCM_C.264 -vsync drop -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-hpcalq_brcm_b:        CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/HPCALQ_BRCM_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-hpcamapalq_bcrm_b:    CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/HPCAMAPALQ_BRCM_B.264 -vsync 0 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-hpcamolq_brcm_b:      CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/HPCAMOLQ_BRCM_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-hpcanl_brcm_c:        CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/HPCANL_BRCM_C.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-hpcaq2lq_brcm_b:      CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/HPCAQ2LQ_BRCM_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-hpcv_brcm_a:          CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/HPCV_BRCM_A.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-hpcvfl_bcrm_a:        CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/HPCVFL_BRCM_A.264 -vsync drop -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-hpcvflnl_bcrm_a:      CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/HPCVFLNL_BRCM_A.264 -vsync drop -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-hpcvmolq_brcm_b:      CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/HPCVMOLQ_BRCM_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-frext-hpcvnl_brcm_a:        CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/FRext/HPCVNL_BRCM_A.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-hcbp2_hhi_a:                CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/HCBP2_HHI_A.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-hcmp1_hhi_a:                CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/HCMP1_HHI_A.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-ls_sva_d:                   CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/LS_SVA_D.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-midr_mw_d:                  CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/MIDR_MW_D.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-mps_mw_a:                   CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/MPS_MW_A.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-mr1_bt_a:                   CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/MR1_BT_A.h264 -pix_fmt yuv420p
fate-libyami-h264-conformance-mr1_mw_a:                   CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/MR1_MW_A.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-mr2_mw_a:                   CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/MR2_MW_A.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-mr2_tandberg_e:             CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/MR2_TANDBERG_E.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-mr3_tandberg_b:             CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/MR3_TANDBERG_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-mr4_tandberg_c:             CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/MR4_TANDBERG_C.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-mr5_tandberg_c:             CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/MR5_TANDBERG_C.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-mr9_bt_b:                   CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/MR9_BT_B.h264 -pix_fmt yuv420p
fate-libyami-h264-conformance-mv1_brcm_d:                 CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/src19td.IBP.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-nl1_sony_d:                 CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/NL1_Sony_D.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-nl2_sony_h:                 CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/NL2_Sony_H.jsv -pix_fmt yuv420p
fate-libyami-h264-conformance-nl3_sva_e:                  CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/NL3_SVA_E.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-nlmq1_jvc_c:                CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/NLMQ1_JVC_C.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-nlmq2_jvc_c:                CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/NLMQ2_JVC_C.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-nrf_mw_e:                   CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/NRF_MW_E.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-sharp_mp_field_1_b:         CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/Sharp_MP_Field_1_B.jvt -pix_fmt yuv420p
fate-libyami-h264-conformance-sharp_mp_field_2_b:         CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/Sharp_MP_Field_2_B.jvt -pix_fmt yuv420p
fate-libyami-h264-conformance-sharp_mp_field_3_b:         CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/Sharp_MP_Field_3_B.jvt -pix_fmt yuv420p
fate-libyami-h264-conformance-sharp_mp_paff_1r2:          CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/Sharp_MP_PAFF_1r2.jvt -pix_fmt yuv420p
fate-libyami-h264-conformance-sharp_mp_paff_2r:           CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/Sharp_MP_PAFF_2.jvt -pix_fmt yuv420p
fate-libyami-h264-conformance-sl1_sva_b:                  CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/SL1_SVA_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-sva_ba1_b:                  CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/SVA_BA1_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-sva_ba2_d:                  CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/SVA_BA2_D.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-sva_base_b:                 CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/SVA_Base_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-sva_cl1_e:                  CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/SVA_CL1_E.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-sva_fm1_e:                  CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/SVA_FM1_E.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-sva_nl1_b:                  CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/SVA_NL1_B.264 -pix_fmt yuv420p
fate-libyami-h264-conformance-sva_nl2_e:                  CMD = framecrc -vsync drop -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264-conformance/SVA_NL2_E.264 -pix_fmt yuv420p

define FATE_LIBYAMI_H264_TEST
fate-libyami-$(1): REF = $(SRC_PATH)/tests/ref/fate/$(1)
endef

$(foreach N,$(FATE_LIBYAMI_H264_REF),$(eval $(call FATE_LIBYAMI_H264_TEST,$(N))))

fate-libyami-h264-bsf-mp4toannexb:                        CMD = md5 -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264/interlaced_crop.mp4 -vcodec copy -bsf h264_mp4toannexb -f h264
fate-libyami-h264-bsf-mp4toannexb:                        REF = $(SRC_PATH)/tests/ref/fate/h264-bsf-mp4toannexb
fate-libyami-h264-extreme-plane-pred:                     CMD = framemd5 -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264/extreme-plane-pred.h264 -pix_fmt yuv420p
fate-libyami-h264-extreme-plane-pred:                     REF = $(SRC_PATH)/tests/ref/fate/h264-extreme-plane-pred
fate-libyami-h264-direct-bff:                             CMD = framecrc -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264/direct-bff.mkv -pix_fmt yuv420p
fate-libyami-h264-direct-bff:                             REF = $(SRC_PATH)/tests/ref/fate/h264-direct-bff

fate-libyami-h264-reinit-large_420_8-to-small_420_8:      CMD = framecrc -c:v libyami_h264 -i $(TARGET_SAMPLES)/h264/reinit-large_420_8-to-small_420_8.h264 -vf format=yuv444p10le,scale=w=352:h=288
fate-libyami-h264-reinit-large_420_8-to-small_420_8:      REF = $(SRC_PATH)/tests/ref/fate/h264-reinit-large_420_8-to-small_420_8



LIBYAMI_HEVC_SAMPLES =                  \
    AMP_A_Samsung_4             \
    AMP_A_Samsung_6             \
    AMP_B_Samsung_4             \
    AMP_B_Samsung_6             \
    AMP_D_Hisilicon             \
    AMP_E_Hisilicon             \
    AMP_F_Hisilicon_3           \
    AMVP_A_MTK_4                \
    AMVP_B_MTK_4                \
    AMVP_C_Samsung_4            \
    AMVP_C_Samsung_6            \
    BUMPING_A_ericsson_1        \
    CAINIT_A_SHARP_4            \
    CAINIT_B_SHARP_4            \
    CAINIT_C_SHARP_3            \
    CAINIT_D_SHARP_3            \
    CAINIT_E_SHARP_3            \
    CAINIT_F_SHARP_3            \
    CAINIT_G_SHARP_3            \
    CAINIT_H_SHARP_3            \
    CIP_A_Panasonic_3           \
    cip_B_NEC_3                 \
    CIP_C_Panasonic_2           \
    DBLK_A_SONY_3               \
    DBLK_B_SONY_3               \
    DBLK_C_SONY_3               \
    DBLK_D_VIXS_2               \
    DBLK_E_VIXS_2               \
    DBLK_F_VIXS_2               \
    DBLK_G_VIXS_2               \
    DELTAQP_A_BRCM_4            \
    DELTAQP_B_SONY_3            \
    DELTAQP_C_SONY_3            \
    DSLICE_A_HHI_5              \
    DSLICE_B_HHI_5              \
    DSLICE_C_HHI_5              \
    ENTP_A_Qualcomm_1           \
    ENTP_B_Qualcomm_1           \
    ENTP_C_Qualcomm_1           \
    EXT_A_ericsson_4            \
    ipcm_A_NEC_3                \
    ipcm_B_NEC_3                \
    ipcm_C_NEC_3                \
    ipcm_D_NEC_3                \
    ipcm_E_NEC_2                \
    IPRED_A_docomo_2            \
    IPRED_B_Nokia_3             \
    IPRED_C_Mitsubishi_3        \
    LS_A_Orange_2               \
    LS_B_ORANGE_4               \
    LTRPSPS_A_Qualcomm_1        \
    MAXBINS_A_TI_4              \
    MAXBINS_B_TI_4              \
    MAXBINS_C_TI_4              \
    MERGE_A_TI_3                \
    MERGE_B_TI_3                \
    MERGE_C_TI_3                \
    MERGE_D_TI_3                \
    MERGE_E_TI_3                \
    MERGE_F_MTK_4               \
    MERGE_G_HHI_4               \
    MVCLIP_A_qualcomm_3         \
    MVDL1ZERO_A_docomo_3        \
    MVEDGE_A_qualcomm_3         \
    NoOutPrior_A_Qualcomm_1     \
    NoOutPrior_B_Qualcomm_1     \
    NUT_A_ericsson_5            \
    OPFLAG_A_Qualcomm_1         \
    OPFLAG_B_Qualcomm_1         \
    OPFLAG_C_Qualcomm_1         \
    PICSIZE_B_Bossen_1          \
    PICSIZE_C_Bossen_1          \
    PICSIZE_D_Bossen_1          \
    PMERGE_A_TI_3               \
    PMERGE_B_TI_3               \
    PMERGE_C_TI_3               \
    PMERGE_D_TI_3               \
    PMERGE_E_TI_3               \
    POC_A_Bossen_3              \
    PPS_A_qualcomm_7            \
    PS_A_VIDYO_3                \
    PS_B_VIDYO_3                \
    RAP_A_docomo_4              \
    RAP_B_Bossen_1              \
    RPLM_A_qualcomm_4           \
    RPLM_B_qualcomm_4           \
    RPS_A_docomo_4              \
    RPS_B_qualcomm_5            \
    RPS_C_ericsson_5            \
    RPS_D_ericsson_6            \
    RPS_E_qualcomm_5            \
    RPS_F_docomo_1              \
    RQT_A_HHI_4                 \
    RQT_B_HHI_4                 \
    RQT_C_HHI_4                 \
    RQT_D_HHI_4                 \
    RQT_E_HHI_4                 \
    RQT_F_HHI_4                 \
    RQT_G_HHI_4                 \
    SAO_A_MediaTek_4            \
    SAO_B_MediaTek_5            \
    SAO_C_Samsung_4             \
    SAO_C_Samsung_5             \
    SAO_D_Samsung_4             \
    SAO_D_Samsung_5             \
    SAO_E_Canon_4               \
    SAO_F_Canon_3               \
    SAO_G_Canon_3               \
    SDH_A_Orange_3              \
    SLICES_A_Rovi_3             \
    SLIST_A_Sony_4              \
    SLIST_B_Sony_8              \
    SLIST_C_Sony_3              \
    SLIST_D_Sony_9              \
    SLPPLP_A_VIDYO_1            \
    SLPPLP_A_VIDYO_2            \
    STRUCT_A_Samsung_5          \
    STRUCT_B_Samsung_4          \
    STRUCT_B_Samsung_6          \
    TILES_A_Cisco_2             \
    TILES_B_Cisco_1             \
    TMVP_A_MS_3                 \
    TSCL_A_VIDYO_5              \
    TSCL_B_VIDYO_4              \
    TSKIP_A_MS_3                \
    TUSIZE_A_Samsung_1          \
    VPSID_A_VIDYO_1             \
    VPSID_A_VIDYO_2             \
    WP_A_Toshiba_3              \
    WP_B_Toshiba_3              \
    WPP_A_ericsson_MAIN_2       \
    WPP_B_ericsson_MAIN_2       \
    WPP_C_ericsson_MAIN_2       \
    WPP_D_ericsson_MAIN_2       \
    WPP_E_ericsson_MAIN_2       \
    WPP_F_ericsson_MAIN_2       \



# equivalent bitstreams
# AMP_D_Hisilicon_3 -- AMP_D_Hisilicon
# AMP_E_Hisilicon_3 -- AMP_E_Hisilicon
# MVDL1ZERO_A_docomo_4 -- MVDL1ZERO_A_docomo_3
# RAP_A_docomo_5 -- RAP_A_docomo_4
# RAP_B_bossen_2 -- RAP_B_bossen_1
# RPS_A_docomo_5 -- RPS_A_docomo_4
# RPS_F_docomo_2 -- RPS_F_docomo_1

# do not pass:
# TSUNEQBD_A_MAIN10_Technicolor_2.bit (segfault mix 9-10bits)
# PERSIST_RPARAM_A_RExt_Sony_1 (rext)


define FATE_LIBYAMI_HEVC_TEST
FATE_LIBYAMI_HEVC += fate-libyami-hevc-conformance-$(1)
fate-libyami-hevc-conformance-$(1): CMD = framecrc -flags unaligned -vsync drop -c:v libyami_hevc -i $(TARGET_SAMPLES)/hevc-conformance/$(1).bit -pix_fmt yuv420p
fate-libyami-hevc-conformance-$(1): REF = $(SRC_PATH)/tests/ref/fate/hevc-conformance-$(1)
endef

$(foreach N,$(LIBYAMI_HEVC_SAMPLES),$(eval $(call FATE_LIBYAMI_HEVC_TEST,$(N))))
$(foreach N,$(LIBYAMI_HEVC_SAMPLES_10BIT),$(eval $(call FATE_LIBYAMI_HEVC_TEST_10BIT,$(N))))
$(foreach N,$(LIBYAMI_HEVC_SAMPLES_422_10BIT),$(eval $(call FATE_LIBYAMI_HEVC_TEST_422_10BIT,$(N))))
$(foreach N,$(LIBYAMI_HEVC_SAMPLES_422_10BIN),$(eval $(call FATE_LIBYAMI_HEVC_TEST_422_10BIN,$(N))))
$(foreach N,$(LIBYAMI_HEVC_SAMPLES_444_8BIT),$(eval $(call FATE_LIBYAMI_HEVC_TEST_444_8BIT,$(N))))
$(foreach N,$(LIBYAMI_HEVC_SAMPLES_444_12BIT),$(eval $(call FATE_LIBYAMI_HEVC_TEST_444_12BIT,$(N))))

FATE_LIBYAMI_HEVC-$(call DEMDEC, HEVC, LIBYAMI_HEVC) += $(FATE_LIBYAMI_HEVC)

FATE_SAMPLES_AVCONV += $(FATE_LIBYAMI_HEVC-yes)

fate-libyami-hevc: $(FATE_LIBYAMI_HEVC-yes)

FATE_LIBYAMI_VP8-$(call DEMDEC, FLV, LIBYAMI_VP8) += fate-libyami-vp8-alpha
fate-libyami-vp8-alpha: CMD = framecrc -c:v libyami_vp8 -i $(TARGET_SAMPLES)/vp8_alpha/vp8_video_with_alpha.webm -vcodec copy
fate-libyami-vp8-alpha: REF = $(SRC_PATH)/tests/ref/fate/vp8-alpha

FATE_LIBYAMI_VP8-$(call DEMDEC, WEBM_DASH_MANIFEST, LIBYAMI_VP8) += fate-libyami-webm-dash-manifest
fate-libyami-webm-dash-manifest: CMD = run $(FFMPEG) -f webm_dash_manifest -c:v libyami_vp8 -i $(TARGET_SAMPLES)/vp8/dash_video1.webm -f webm_dash_manifest -i $(TARGET_SAMPLES)/vp8/dash_video2.webm -f webm_dash_manifest -i $(TARGET_SAMPLES)/vp8/dash_audio1.webm -f webm_dash_manifest -i $(TARGET_SAMPLES)/vp8/dash_audio2.webm -c copy -map 0 -map 1 -map 2 -map 3 -f webm_dash_manifest -adaptation_sets "id=0,streams=0,1 id=1,streams=2,3" -
fate-libyami-webm-dash-manifest: REF = $(SRC_PATH)/tests/ref/fate/webm-dash-manifest

FATE_LIBYAMI_VP8-$(call DEMDEC, WEBM_DASH_MANIFEST, LIBYAMI_VP8) += fate-libyami-webm-dash-manifest-unaligned-video-streams
fate-libyami-webm-dash-manifest-unaligned-video-streams: CMD = run $(FFMPEG) -f webm_dash_manifest -c:v libyami_vp8 -i $(TARGET_SAMPLES)/vp8/dash_video1.webm -f webm_dash_manifest -i $(TARGET_SAMPLES)/vp8/dash_video3.webm -c copy -map 0 -map 1 -f webm_dash_manifest -adaptation_sets "id=0,streams=0,1" -
fate-libyami-webm-dash-manifest-unaligned-video-streams: REF = $(SRC_PATH)/tests/ref/fate/webm-dash-manifest-unaligned-video-streams

FATE_LIBYAMI_VP8-$(call DEMDEC, WEBM_DASH_MANIFEST, LIBYAMI_VP8) += fate-libyami-webm-dash-manifest-unaligned-audio-streams
fate-libyami-webm-dash-manifest-unaligned-audio-streams: CMD = run $(FFMPEG) -f webm_dash_manifest -c:v libyami_vp8 -i $(TARGET_SAMPLES)/vp8/dash_audio1.webm -f webm_dash_manifest -i $(TARGET_SAMPLES)/vp8/dash_audio3.webm -c copy -map 0 -map 1 -f webm_dash_manifest -adaptation_sets "id=0,streams=0,1" -
fate-libyami-webm-dash-manifest-unaligned-audio-streams: REF = $(SRC_PATH)/tests/ref/fate/webm-dash-manifest-unaligned-audio-streams

FATE_LIBYAMI_VP8-$(call DEMDEC, WEBM_DASH_MANIFEST, LIBYAMI_VP8) += fate-libyami-webm-dash-manifest-representations
fate-libyami-webm-dash-manifest-representations: CMD = run $(FFMPEG) -f webm_dash_manifest -c:v libyami_vp8 -i $(TARGET_SAMPLES)/vp8/dash_video1.webm -f webm_dash_manifest -i $(TARGET_SAMPLES)/vp8/dash_video4.webm -c copy -map 0 -map 1 -f webm_dash_manifest -adaptation_sets "id=0,streams=0,1" -
fate-libyami-webm-dash-manifest-representations: REF = $(SRC_PATH)/tests/ref/fate/webm-dash-manifest-representations

LIBYAMI_VP8_SUITE = 001 002 003 004 005 007 008 009 010 011 012 013 015 016 017

define FATE_LIBYAMI_VP8_SUITE
FATE_LIBYAMI_VP8-$(CONFIG_IVF_DEMUXER) += fate-libyami-vp8-test-vector$(2)-$(1)
fate-libyami-vp8-test-vector$(2)-$(1): CMD = framemd5 $(3) -c:v libyami_vp8 -i $(TARGET_SAMPLES)/vp8-test-vectors-r1/vp80-00-comprehensive-$(1).ivf -pix_fmt yuv420p
fate-libyami-vp8-test-vector$(2)-$(1): REF = $(SRC_PATH)/tests/ref/fate/vp8-test-vector-$(1)
endef

define FATE_LIBYAMI_VP8_FULL
$(foreach N,$(LIBYAMI_VP8_SUITE),$(eval $(call FATE_LIBYAMI_VP8_SUITE,$(N),$(1),$(2))))

# FIXME this file contains two frames with identical timestamps,
# so ffmpeg drops one of them
FATE_LIBYAMI_VP8-$(CONFIG_IVF_DEMUXER) += fate-libyami-vp8-sign-bias$(1)
fate-libyami-vp8-sign-bias$(1): CMD = framemd5 $(2) -c:v libyami_vp8 -i $(TARGET_SAMPLES)/vp8/sintel-signbias.ivf -pix_fmt yuv420p
fate-libyami-vp8-sign-bias$(1): REF = $(SRC_PATH)/tests/ref/fate/vp8-sign-bias

endef

$(eval $(call FATE_LIBYAMI_VP8_FULL))

FATE_SAMPLES_AVCONV-$(CONFIG_LIBYAMI_VP8_DECODER) += $(FATE_LIBYAMI_VP8-yes)
fate-libyami-vp8: $(FATE_LIBYAMI_VP8-yes)


fate-libyami-h264-enc%: CMD = framemd5 -f rawvideo -s 352x288  -i $(TARGET_PATH)/tests/data/vsynth2.yuv -vcodec libyami_h264 ${OPTS}
FATE_LIBYAMI_H264_ENC += fate-libyami-h264-enc_yuv420
fate-libyami-h264-enc_yuv420: OPTS =

$(FATE_LIBYAMI_H264_ENC): $(VREF)

FATE_AVCONV-$(call ENCMUX, LIBYAMI_H264, AVI) += $(FATE_LIBYAMI_H264_ENC)
fate-libyami-h264-enc: $(FATE_LIBYAMI_H264_ENC)

fate-libyami-h264-tran%: CMD = framemd5 -vcodec libyami_h264 -i $(TARGET_SAMPLES)/h264/interlaced_crop.mp4 -vcodec libyami_h264 ${OPTS}

FATE_LIBYAMI_H264_TRAN += fate-libyami-h264-tran_mkv
fate-libyami-h264-tran_mkv: OPTS = -force_yami_pipeline

$(FATE_LIBYAMI_H264_TRAN): $(VREF)

FATE_AVCONV-$(call ALLYES,  LIBYAMI_H264_DECODER LIBYAMI_H264_ENCODER MOV_DEMUXER AVI_MUXER) += $(FATE_LIBYAMI_H264_TRAN)
fate-libyami-h264-tran: $(FATE_LIBYAMI_H264_TRAN)


fate-libyami-vp8-enc%: CMD = framemd5 -f rawvideo -s 352x288  -i $(TARGET_PATH)/tests/data/vsynth2.yuv -vcodec libyami_vp8 ${OPTS}
FATE_LIBYAMI_VP8_ENC += fate-libyami-vp8-enc_yuv420
fate-libyami-vp8-enc_yuv420: OPTS =

$(FATE_LIBYAMI_VP8_ENC): $(VREF)

FATE_AVCONV-$(call ENCMUX, LIBYAMI_VP8, AVI) += $(FATE_LIBYAMI_VP8_ENC)
fate-libyami-vp8-enc: $(FATE_LIBYAMI_VP8_ENC)

fate-libyami-vp8-tran%: CMD = framemd5 -vcodec libyami_h264 -i $(TARGET_SAMPLES)/h264/interlaced_crop.mp4 -vcodec libyami_vp8 ${OPTS}

FATE_LIBYAMI_VP8_TRAN += fate-libyami-vp8-tran_mkv
fate-libyami-vp8-tran_mkv: OPTS = -force_yami_pipeline

$(FATE_LIBYAMI_VP8_TRAN): $(VREF)

FATE_AVCONV-$(call ALLYES,  LIBYAMI_H264_DECODER LIBYAMI_VP8_ENCODER MOV_DEMUXER IVF_DEMUXER) += $(FATE_LIBYAMI_VP8_TRAN)
fate-libyami-vp8-tran: $(FATE_LIBYAMI_VP8_TRAN)